import{r as x,F as V,d as Ne,aw as Fe,a3 as F,ax as ee,H as T,ab as te,ay as $,az as ke,i as H,a2 as _,aA as se,at as Te,y as Ie,aB as xe,ao as X,aC as Ce,aD as Pe,aE as C,aF as B,aG as Le,aH as De,aI as Ae,aJ as Be,h as he,e as Se,a6 as Re,aK as ge,g as $e}from"./stack-HLCirhyA.js";function St(e){return new Proxy({},{get(t,r){return r==="style"?s=>e({style:s}).style:e}})}var pe=()=>e=>Array.from(new Set(e)),D=(e,t=[])=>({parts:(...r)=>{if(Ve(t))return D(e,r);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...r)=>D(e,[...t,...r]),omit:(...r)=>D(e,t.filter(s=>!r.includes(s))),rename:r=>D(r,t),keys:()=>t,build:()=>[...new Set(t)].reduce((r,s)=>Object.assign(r,{[s]:{selector:[`&[data-scope="${P(e)}"][data-part="${P(s)}"]`,`& [data-scope="${P(e)}"][data-part="${P(s)}"]`].join(", "),attrs:{"data-scope":P(e),"data-part":P(s)}}}),{})}),P=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),Ve=e=>e.length===0;function Me(e){const t={each(r){var s;for(let i=0;i<((s=e.frames)==null?void 0:s.length);i+=1){const n=e.frames[i];n&&r(n)}},addEventListener(r,s,i){return t.each(n=>{try{n.document.addEventListener(r,s,i)}catch{}}),()=>{try{t.removeEventListener(r,s,i)}catch{}}},removeEventListener(r,s,i){t.each(n=>{try{n.document.removeEventListener(r,s,i)}catch{}})}};return t}function Ge(e){const t=e.frameElement!=null?e.parent:null;return{addEventListener:(r,s,i)=>{try{t==null||t.addEventListener(r,s,i)}catch{}return()=>{try{t==null||t.removeEventListener(r,s,i)}catch{}}},removeEventListener:(r,s,i)=>{try{t==null||t.removeEventListener(r,s,i)}catch{}}}}var re="pointerdown.outside",ie="focus.outside";function Ke(e){for(const t of e)if(H(t)&&$(t))return!0;return!1}var be=e=>"clientY"in e;function We(e,t){if(!be(t)||!e)return!1;const r=e.getBoundingClientRect();return r.width===0||r.height===0?!1:r.top<=t.clientY&&t.clientY<=r.top+r.height&&r.left<=t.clientX&&t.clientX<=r.left+r.width}function _e(e,t){return e.y<=t.y&&t.y<=e.y+e.height&&e.x<=t.x&&t.x<=e.x+e.width}function ne(e,t){if(!t||!be(e))return!1;const r=t.scrollHeight>t.clientHeight,s=r&&e.clientX>t.offsetLeft+t.clientWidth,i=t.scrollWidth>t.clientWidth,n=i&&e.clientY>t.offsetTop+t.clientHeight,a={x:t.offsetLeft,y:t.offsetTop,width:t.clientWidth+(r?16:0),height:t.clientHeight+(i?16:0)},c={x:e.clientX,y:e.clientY};return _e(a,c)?s||n:!1}function He(e,t){const{exclude:r,onFocusOutside:s,onPointerDownOutside:i,onInteractOutside:n,defer:a}=t;if(!e)return;const c=V(e),u=Ne(e),o=Me(u),f=Ge(u);function h(b,E){if(!H(E)||!E.isConnected||_(e,E)||We(e,b))return!1;const O=c.querySelector(`[aria-controls="${e.id}"]`);if(O){const w=se(O);if(ne(b,w))return!1}const A=se(e);return ne(b,A)?!1:!(r!=null&&r(E))}const l=new Set,g=Fe(e==null?void 0:e.getRootNode());function d(b){function E(O){var Q;const A=a&&!ee()?x:M=>M(),w=O??b,J=((Q=w==null?void 0:w.composedPath)==null?void 0:Q.call(w))??[w==null?void 0:w.target];A(()=>{const M=g?J[0]:T(b);if(!(!e||!h(b,M))){if(i||n){const we=te(i,n);e.addEventListener(re,we,{once:!0})}ae(e,re,{bubbles:!1,cancelable:!0,detail:{originalEvent:w,contextmenu:ke(w),focusable:Ke(J),target:M}})}})}b.pointerType==="touch"?(l.forEach(O=>O()),l.add(F(c,"click",E,{once:!0})),l.add(f.addEventListener("click",E,{once:!0})),l.add(o.addEventListener("click",E,{once:!0}))):E()}const p=new Set,y=setTimeout(()=>{p.add(F(c,"pointerdown",d,!0)),p.add(f.addEventListener("pointerdown",d,!0)),p.add(o.addEventListener("pointerdown",d,!0))},0);function m(b){(a?x:O=>O())(()=>{const O=T(b);if(!(!e||!h(b,O))){if(s||n){const A=te(s,n);e.addEventListener(ie,A,{once:!0})}ae(e,ie,{bubbles:!1,cancelable:!0,detail:{originalEvent:b,contextmenu:!1,focusable:$(O),target:O}})}})}return ee()||(p.add(F(c,"focusin",m,!0)),p.add(f.addEventListener("focusin",m,!0)),p.add(o.addEventListener("focusin",m,!0))),()=>{clearTimeout(y),l.forEach(b=>b()),p.forEach(b=>b())}}function qe(e,t){const{defer:r}=t,s=r?x:n=>n(),i=[];return i.push(s(()=>{const n=typeof e=="function"?e():e;i.push(He(n,t))})),()=>{i.forEach(n=>n==null?void 0:n())}}function ae(e,t,r){const s=e.ownerDocument.defaultView||window,i=new s.CustomEvent(t,r);return e.dispatchEvent(i)}function Ye(e,t){const r=s=>{s.key==="Escape"&&(s.isComposing||t==null||t(s))};return F(V(e),"keydown",r,{capture:!0})}var oe="layer:request-dismiss",N={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){var s;const t=this.indexOf(e),r=this.topMostPointerBlockingLayer()?this.indexOf((s=this.topMostPointerBlockingLayer())==null?void 0:s.node):-1;return t<r},isTopMost(e){const t=this.layers[this.count()-1];return(t==null?void 0:t.node)===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},isInNestedLayer(e,t){return this.getNestedLayers(e).some(r=>_(r.node,t))},isInBranch(e){return Array.from(this.branches).some(t=>_(t,e))},add(e){this.layers.push(e),this.syncLayerIndex()},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);t<0||(t<this.count()-1&&this.getNestedLayers(e).forEach(s=>N.dismiss(s.node,e)),this.layers.splice(t,1),this.syncLayerIndex())},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},syncLayerIndex(){this.layers.forEach((e,t)=>{e.node.style.setProperty("--layer-index",`${t}`)})},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e,t){const r=this.indexOf(e);if(r===-1)return;const s=this.layers[r];Ue(e,oe,i=>{var n;(n=s.requestDismiss)==null||n.call(s,i),i.defaultPrevented||s==null||s.dismiss()}),Xe(e,oe,{originalLayer:e,targetLayer:t,originalIndex:r,targetIndex:t?this.indexOf(t):-1}),this.syncLayerIndex()},clear(){this.remove(this.layers[0].node)}};function Xe(e,t,r){const s=e.ownerDocument.defaultView||window,i=new s.CustomEvent(t,{cancelable:!0,bubbles:!0,detail:r});return e.dispatchEvent(i)}function Ue(e,t,r){e.addEventListener(t,r,{once:!0})}var ce;function le(){N.layers.forEach(({node:e})=>{e.style.pointerEvents=N.isBelowPointerBlockingLayer(e)?"none":"auto"})}function Ze(e){e.style.pointerEvents=""}function je(e,t){const r=V(e),s=[];return N.hasPointerBlockingLayer()&&!r.body.hasAttribute("data-inert")&&(ce=document.body.style.pointerEvents,queueMicrotask(()=>{r.body.style.pointerEvents="none",r.body.setAttribute("data-inert","")})),t==null||t.forEach(i=>{const[n,a]=xe(()=>{const c=i();return H(c)?c:null},{timeout:1e3});n.then(c=>s.push(X(c,{pointerEvents:"auto"}))),s.push(a)}),()=>{N.hasPointerBlockingLayer()||(queueMicrotask(()=>{r.body.style.pointerEvents=ce,r.body.removeAttribute("data-inert"),r.body.style.length===0&&r.body.removeAttribute("style")}),s.forEach(i=>i()))}}function ze(e,t){const{warnOnMissingNode:r=!0}=t;if(r&&!e){Ie("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!e)return;const{onDismiss:s,onRequestDismiss:i,pointerBlocking:n,exclude:a,debug:c}=t,u={dismiss:s,node:e,pointerBlocking:n,requestDismiss:i};N.add(u),le();function o(d){var y,m;const p=T(d.detail.originalEvent);N.isBelowPointerBlockingLayer(e)||N.isInBranch(p)||((y=t.onPointerDownOutside)==null||y.call(t,d),(m=t.onInteractOutside)==null||m.call(t,d),!d.defaultPrevented&&(c&&console.log("onPointerDownOutside:",d.detail.originalEvent),s==null||s()))}function f(d){var y,m;const p=T(d.detail.originalEvent);N.isInBranch(p)||((y=t.onFocusOutside)==null||y.call(t,d),(m=t.onInteractOutside)==null||m.call(t,d),!d.defaultPrevented&&(c&&console.log("onFocusOutside:",d.detail.originalEvent),s==null||s()))}function h(d){var p;N.isTopMost(e)&&((p=t.onEscapeKeyDown)==null||p.call(t,d),!d.defaultPrevented&&s&&(d.preventDefault(),s()))}function l(d){var b;if(!e)return!1;const p=typeof a=="function"?a():a,y=Array.isArray(p)?p:[p],m=(b=t.persistentElements)==null?void 0:b.map(E=>E()).filter(H);return m&&y.push(...m),y.some(E=>_(E,d))||N.isInNestedLayer(e,d)}const g=[n?je(e,t.persistentElements):void 0,Ye(e,h),qe(e,{exclude:l,onFocusOutside:f,onPointerDownOutside:o,defer:t.defer})];return()=>{N.remove(e),le(),Ze(e),g.forEach(d=>d==null?void 0:d())}}function Je(e,t){const{defer:r}=t,s=r?x:n=>n(),i=[];return i.push(s(()=>{const n=Te(e)?e():e;i.push(ze(n,t))})),()=>{i.forEach(n=>n==null?void 0:n())}}var L=new WeakMap,G=new WeakMap,K={},q=0,ve=e=>e&&(e.host||ve(e.parentNode)),Qe=(e,t)=>t.map(r=>{if(e.contains(r))return r;const s=ve(r);return s&&e.contains(s)?s:(console.error("[zag-js > ariaHidden] target",r,"in not contained inside",e,". Doing nothing"),null)}).filter(r=>!!r),et=new Set(["script","output","status","next-route-announcer"]),tt=e=>et.has(e.localName)||e.role==="status"||e.hasAttribute("aria-live")?!0:e.matches("[data-live-announcer]"),st=(e,t)=>{const{parentNode:r,markerName:s,controlAttribute:i}=t,n=Qe(r,Array.isArray(e)?e:[e]);K[s]||(K[s]=new WeakMap);const a=K[s],c=[],u=new Set,o=new Set(n),f=l=>{!l||u.has(l)||(u.add(l),f(l.parentNode))};n.forEach(f);const h=l=>{!l||o.has(l)||Array.prototype.forEach.call(l.children,g=>{if(u.has(g))h(g);else try{if(tt(g))return;const p=g.getAttribute(i)==="true",y=(L.get(g)||0)+1,m=(a.get(g)||0)+1;L.set(g,y),a.set(g,m),c.push(g),y===1&&p&&G.set(g,!0),m===1&&g.setAttribute(s,""),p||g.setAttribute(i,"true")}catch(d){console.error("[zag-js > ariaHidden] cannot operate on ",g,d)}})};return h(r),u.clear(),q++,()=>{c.forEach(l=>{const g=L.get(l)-1,d=a.get(l)-1;L.set(l,g),a.set(l,d),g||(G.has(l)||l.removeAttribute(i),G.delete(l)),d||l.removeAttribute(s)}),q--,q||(L=new WeakMap,L=new WeakMap,G=new WeakMap,K={})}},rt=e=>(Array.isArray(e)?e[0]:e).ownerDocument.body,it=(e,t=rt(e),r="data-aria-hidden")=>{if(t)return st(e,{parentNode:t,markerName:r,controlAttribute:"aria-hidden"})},nt=e=>{const t=requestAnimationFrame(()=>e());return()=>cancelAnimationFrame(t)};function at(e,t={}){const{defer:r=!0}=t,s=r?nt:n=>n(),i=[];return i.push(s(()=>{const a=(typeof e=="function"?e():e).filter(Boolean);a.length!==0&&i.push(it(a))})),()=>{i.forEach(n=>n==null?void 0:n())}}var ot=Object.defineProperty,ct=(e,t,r)=>t in e?ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t,r)=>ct(e,typeof t!="symbol"?t+"":t,r),de={activateTrap(e,t){if(e.length>0){const s=e[e.length-1];s!==t&&s.pause()}const r=e.indexOf(t);r===-1||e.splice(r,1),e.push(t)},deactivateTrap(e,t){const r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},lt=[],dt=class{constructor(e,t){v(this,"trapStack"),v(this,"config"),v(this,"doc"),v(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),v(this,"listenerCleanups",[]),v(this,"handleFocus",s=>{const i=T(s),n=this.findContainerIndex(i,s)>=0;if(n||Le(i))n&&(this.state.mostRecentlyFocusedNode=i);else{s.stopImmediatePropagation();let a,c=!0;if(this.state.mostRecentlyFocusedNode)if(B(this.state.mostRecentlyFocusedNode)>0){const u=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:o}=this.state.containerGroups[u];if(o.length>0){const f=o.findIndex(h=>h===this.state.mostRecentlyFocusedNode);f>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?f+1<o.length&&(a=o[f+1],c=!1):f-1>=0&&(a=o[f-1],c=!1))}}else this.state.containerGroups.some(u=>u.tabbableNodes.some(o=>B(o)>0))||(c=!1);else c=!1;c&&(a=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),a?this.tryFocus(a):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),v(this,"handlePointerDown",s=>{const i=T(s);if(!(this.findContainerIndex(i,s)>=0)){if(R(this.config.clickOutsideDeactivates,s)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}R(this.config.allowOutsideClick,s)||s.preventDefault()}}),v(this,"handleClick",s=>{const i=T(s);this.findContainerIndex(i,s)>=0||R(this.config.clickOutsideDeactivates,s)||R(this.config.allowOutsideClick,s)||(s.preventDefault(),s.stopImmediatePropagation())}),v(this,"handleTabKey",s=>{if(this.config.isKeyForward(s)||this.config.isKeyBackward(s)){this.state.recentNavEvent=s;const i=this.config.isKeyBackward(s),n=this.findNextNavNode({event:s,isBackward:i});if(!n)return;S(s)&&s.preventDefault(),this.tryFocus(n)}}),v(this,"handleEscapeKey",s=>{ut(s)&&R(this.config.escapeDeactivates,s)!==!1&&(s.preventDefault(),this.deactivate())}),v(this,"_mutationObserver"),v(this,"setupMutationObserver",()=>{const s=this.doc.defaultView||window;this._mutationObserver=new s.MutationObserver(i=>{i.some(a=>Array.from(a.removedNodes).some(u=>u===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode())})}),v(this,"updateObservedNodes",()=>{var s;(s=this._mutationObserver)==null||s.disconnect(),this.state.active&&!this.state.paused&&this.state.containers.map(i=>{var n;(n=this._mutationObserver)==null||n.observe(i,{subtree:!0,childList:!0})})}),v(this,"getInitialFocusNode",()=>{let s=this.getNodeForOption("initialFocus",{hasFallback:!0});if(s===!1)return!1;if(s===void 0||s&&!$(s))if(this.findContainerIndex(this.doc.activeElement)>=0)s=this.doc.activeElement;else{const i=this.state.tabbableGroups[0];s=i&&i.firstTabbableNode||this.getNodeForOption("fallbackFocus")}else s===null&&(s=this.getNodeForOption("fallbackFocus"));if(!s)throw new Error("Your focus-trap needs to have at least one focusable element");return s.isConnected||(s=this.getNodeForOption("fallbackFocus")),s}),v(this,"tryFocus",s=>{if(s!==!1&&s!==De(this.doc)){if(!s||!s.focus){this.tryFocus(this.getInitialFocusNode());return}s.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=s,ft(s)&&s.select()}}),v(this,"deactivate",s=>{if(!this.state.active)return this;const i={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...s};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),de.deactivateTrap(this.trapStack,this);const n=this.getOption(i,"onDeactivate"),a=this.getOption(i,"onPostDeactivate"),c=this.getOption(i,"checkCanReturnFocus"),u=this.getOption(i,"returnFocus","returnFocusOnDeactivate");n==null||n();const o=()=>{ue(()=>{if(u){const f=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(f)}a==null||a()})};if(u&&c){const f=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return c(f).then(o,o),this}return o(),this}),v(this,"pause",s=>{if(this.state.paused||!this.state.active)return this;const i=this.getOption(s,"onPause"),n=this.getOption(s,"onPostPause");return this.state.paused=!0,i==null||i(),this.removeListeners(),this.updateObservedNodes(),n==null||n(),this}),v(this,"unpause",s=>{if(!this.state.paused||!this.state.active)return this;const i=this.getOption(s,"onUnpause"),n=this.getOption(s,"onPostUnpause");return this.state.paused=!1,i==null||i(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),n==null||n(),this}),v(this,"updateContainerElements",s=>(this.state.containers=Array.isArray(s)?s.filter(Boolean):[s].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),v(this,"getReturnFocusNode",s=>{const i=this.getNodeForOption("setReturnFocus",{params:[s]});return i||(i===!1?!1:s)}),v(this,"getOption",(s,i,n)=>s&&s[i]!==void 0?s[i]:this.config[n||i]),v(this,"getNodeForOption",(s,{hasFallback:i=!1,params:n=[]}={})=>{let a=this.config[s];if(typeof a=="function"&&(a=a(...n)),a===!0&&(a=void 0),!a){if(a===void 0||a===!1)return a;throw new Error(`\`${s}\` was specified but was not a node, or did not return a node`)}let c=a;if(typeof a=="string"){try{c=this.doc.querySelector(a)}catch(u){throw new Error(`\`${s}\` appears to be an invalid selector; error="${u.message}"`)}if(!c&&!i)throw new Error(`\`${s}\` as selector refers to no known node`)}return c}),v(this,"findNextNavNode",s=>{const{event:i,isBackward:n=!1}=s,a=s.target||T(i);this.updateTabbableNodes();let c=null;if(this.state.tabbableGroups.length>0){const u=this.findContainerIndex(a,i),o=u>=0?this.state.containerGroups[u]:void 0;if(u<0)n?c=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:c=this.state.tabbableGroups[0].firstTabbableNode;else if(n){let f=this.state.tabbableGroups.findIndex(({firstTabbableNode:h})=>a===h);if(f<0&&((o==null?void 0:o.container)===a||$(a)&&!C(a)&&!(o!=null&&o.nextTabbableNode(a,!1)))&&(f=u),f>=0){const h=f===0?this.state.tabbableGroups.length-1:f-1,l=this.state.tabbableGroups[h];c=B(a)>=0?l.lastTabbableNode:l.lastDomTabbableNode}else S(i)||(c=o==null?void 0:o.nextTabbableNode(a,!1))}else{let f=this.state.tabbableGroups.findIndex(({lastTabbableNode:h})=>a===h);if(f<0&&((o==null?void 0:o.container)===a||$(a)&&!C(a)&&!(o!=null&&o.nextTabbableNode(a)))&&(f=u),f>=0){const h=f===this.state.tabbableGroups.length-1?0:f+1,l=this.state.tabbableGroups[h];c=B(a)>=0?l.firstTabbableNode:l.firstDomTabbableNode}else S(i)||(c=o==null?void 0:o.nextTabbableNode(a))}}else c=this.getNodeForOption("fallbackFocus");return c}),this.trapStack=t.trapStack||lt;const r={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward(s){return S(s)&&!s.shiftKey},isKeyBackward(s){return S(s)&&s.shiftKey},...t};this.doc=r.document||V(Array.isArray(e)?e[0]:e),this.config=r,this.updateContainerElements(e),this.setupMutationObserver()}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(e,t){const r=typeof(t==null?void 0:t.composedPath)=="function"?t.composedPath():void 0;return this.state.containerGroups.findIndex(({container:s,tabbableNodes:i})=>s.contains(e)||(r==null?void 0:r.includes(s))||i.find(n=>n===e))}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(e=>{const t=Ce(e),r=Pe(e),s=t.length>0?t[0]:void 0,i=t.length>0?t[t.length-1]:void 0,n=r.find(o=>C(o)),a=r.slice().reverse().find(o=>C(o)),c=!!t.find(o=>B(o)>0);function u(o,f=!0){const h=t.indexOf(o);return h<0?f?r.slice(r.indexOf(o)+1).find(l=>C(l)):r.slice(0,r.indexOf(o)).reverse().find(l=>C(l)):t[h+(f?1:-1)]}return{container:e,tabbableNodes:t,focusableNodes:r,posTabIndexesFound:c,firstTabbableNode:s,lastTabbableNode:i,firstDomTabbableNode:n,lastDomTabbableNode:a,nextTabbableNode:u}}),this.state.tabbableGroups=this.state.containerGroups.filter(e=>e.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(e=>e.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return de.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?ue(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(F(this.doc,"focusin",this.handleFocus,!0),F(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),F(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),F(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),F(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),F(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(e=>e()),this.listenerCleanups=[],this}activate(e){if(this.state.active)return this;const t=this.getOption(e,"onActivate"),r=this.getOption(e,"onPostActivate"),s=this.getOption(e,"checkCanFocusTrap");s||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=this.doc.activeElement||null,t==null||t();const i=()=>{s&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),r==null||r()};return s?(s(this.state.containers.concat()).then(i,i),this):(i(),this)}},S=e=>e.key==="Tab",R=(e,...t)=>typeof e=="function"?e(...t):e,ut=e=>!e.isComposing&&e.key==="Escape",ue=e=>setTimeout(e,0),ft=e=>e.localName==="input"&&"select"in e&&typeof e.select=="function";function ht(e,t={}){let r;const s=x(()=>{const i=typeof e=="function"?e():e;if(i){r=new dt(i,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:i,...t,document:V(i)});try{r.activate()}catch{}}});return function(){r==null||r.deactivate(),s()}}var Y="data-scroll-lock";function gt(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function pt(e){const t=e??document,r=t.defaultView??window,{documentElement:s,body:i}=t;if(i.hasAttribute(Y))return;const a=r.innerWidth-s.clientWidth;i.setAttribute(Y,"");const c=()=>Ae(s,"--scrollbar-width",`${a}px`),u=gt(s),o=()=>X(i,{overflow:"hidden",[u]:`${a}px`}),f=()=>{const{scrollX:l,scrollY:g,visualViewport:d}=r,p=(d==null?void 0:d.offsetLeft)??0,y=(d==null?void 0:d.offsetTop)??0,m=X(i,{position:"fixed",overflow:"hidden",top:`${-(g-Math.floor(y))}px`,left:`${-(l-Math.floor(p))}px`,right:"0",[u]:`${a}px`});return()=>{m==null||m(),r.scrollTo({left:l,top:g,behavior:"instant"})}},h=[c(),Be()?f():o()];return()=>{h.forEach(l=>l==null?void 0:l()),i.removeAttribute(Y)}}var bt=D("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),I=bt.build(),me=e=>{var t;return((t=e.ids)==null?void 0:t.positioner)??`dialog:${e.id}:positioner`},ye=e=>{var t;return((t=e.ids)==null?void 0:t.backdrop)??`dialog:${e.id}:backdrop`},U=e=>{var t;return((t=e.ids)==null?void 0:t.content)??`dialog:${e.id}:content`},Ee=e=>{var t;return((t=e.ids)==null?void 0:t.trigger)??`dialog:${e.id}:trigger`},Z=e=>{var t;return((t=e.ids)==null?void 0:t.title)??`dialog:${e.id}:title`},j=e=>{var t;return((t=e.ids)==null?void 0:t.description)??`dialog:${e.id}:description`},Oe=e=>{var t;return((t=e.ids)==null?void 0:t.closeTrigger)??`dialog:${e.id}:close`},W=e=>e.getById(U(e)),vt=e=>e.getById(me(e)),mt=e=>e.getById(ye(e)),yt=e=>e.getById(Ee(e)),Et=e=>e.getById(Z(e)),Ot=e=>e.getById(j(e)),wt=e=>e.getById(Oe(e));function Rt(e,t){const{state:r,send:s,context:i,prop:n,scope:a}=e,c=n("aria-label"),u=r.matches("open");return{open:u,setOpen(o){r.matches("open")!==o&&s({type:o?"OPEN":"CLOSE"})},getTriggerProps(){return t.button({...I.trigger.attrs,dir:n("dir"),id:Ee(a),"aria-haspopup":"dialog",type:"button","aria-expanded":u,"data-state":u?"open":"closed","aria-controls":U(a),onClick(o){o.defaultPrevented||s({type:"TOGGLE"})}})},getBackdropProps(){return t.element({...I.backdrop.attrs,dir:n("dir"),hidden:!u,id:ye(a),"data-state":u?"open":"closed"})},getPositionerProps(){return t.element({...I.positioner.attrs,dir:n("dir"),id:me(a),style:{pointerEvents:u?void 0:"none"}})},getContentProps(){const o=i.get("rendered");return t.element({...I.content.attrs,dir:n("dir"),role:n("role"),hidden:!u,id:U(a),tabIndex:-1,"data-state":u?"open":"closed","aria-modal":!0,"aria-label":c||void 0,"aria-labelledby":c||!o.title?void 0:Z(a),"aria-describedby":o.description?j(a):void 0})},getTitleProps(){return t.element({...I.title.attrs,dir:n("dir"),id:Z(a)})},getDescriptionProps(){return t.element({...I.description.attrs,dir:n("dir"),id:j(a)})},getCloseTriggerProps(){return t.button({...I.closeTrigger.attrs,dir:n("dir"),id:Oe(a),type:"button",onClick(o){o.defaultPrevented||(o.stopPropagation(),s({type:"CLOSE"}))}})}}}var $t=he({props({props:e,scope:t}){const r=e.role==="alertdialog",s=r?()=>wt(t):void 0,i=typeof e.modal=="boolean"?e.modal:!0;return{role:"dialog",modal:i,trapFocus:i,preventScroll:i,closeOnInteractOutside:!r,closeOnEscape:!0,restoreFocus:!0,initialFocusEl:s,...e}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{rendered:e(()=>({defaultValue:{title:!0,description:!0}}))}},watch({track:e,action:t,prop:r}){e([()=>r("open")],()=>{t(["toggleVisibility"])})},states:{open:{entry:["checkRenderedElements","syncZIndex"],effects:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackDismissableElement({scope:e,send:t,prop:r}){return Je(()=>W(e),{defer:!0,pointerBlocking:r("modal"),exclude:[yt(e)],onInteractOutside(i){var n;(n=r("onInteractOutside"))==null||n(i),r("closeOnInteractOutside")||i.preventDefault()},persistentElements:r("persistentElements"),onFocusOutside:r("onFocusOutside"),onPointerDownOutside:r("onPointerDownOutside"),onRequestDismiss:r("onRequestDismiss"),onEscapeKeyDown(i){var n;(n=r("onEscapeKeyDown"))==null||n(i),r("closeOnEscape")||i.preventDefault()},onDismiss(){t({type:"CLOSE",src:"interact-outside"})}})},preventScroll({scope:e,prop:t}){if(t("preventScroll"))return pt(e.getDoc())},trapFocus({scope:e,prop:t}){return t("trapFocus")?ht(()=>W(e),{preventScroll:!0,returnFocusOnDeactivate:!!t("restoreFocus"),initialFocus:t("initialFocusEl"),setReturnFocus:s=>{var i;return((i=t("finalFocusEl"))==null?void 0:i())??s}}):void 0},hideContentBelow({scope:e,prop:t}){return t("modal")?at(()=>[W(e)],{defer:!0}):void 0}},actions:{checkRenderedElements({context:e,scope:t}){x(()=>{e.set("rendered",{title:!!Et(t),description:!!Ot(t)})})},syncZIndex({scope:e}){x(()=>{const t=W(e);if(!t)return;const r=Se(t);[vt(e),mt(e)].forEach(i=>{i==null||i.style.setProperty("--z-index",r.zIndex),i==null||i.style.setProperty("--layer-index",r.getPropertyValue("--layer-index"))})})},invokeOnClose({prop:e}){var t;(t=e("onOpenChange"))==null||t({open:!1})},invokeOnOpen({prop:e}){var t;(t=e("onOpenChange"))==null||t({open:!0})},toggleVisibility({prop:e,send:t,event:r}){t({type:e("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:r})}}}});pe()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","onRequestDismiss","defaultOpen","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]);var Nt=D("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange"),k=Nt.build(),Ft=e=>{var t;return((t=e.ids)==null?void 0:t.root)??`progress-${e.id}`},kt=e=>{var t;return((t=e.ids)==null?void 0:t.track)??`progress-${e.id}-track`},Tt=e=>{var t;return((t=e.ids)==null?void 0:t.label)??`progress-${e.id}-label`},It=e=>{var t;return((t=e.ids)==null?void 0:t.circle)??`progress-${e.id}-circle`};function Vt(e,t){const{context:r,computed:s,prop:i,send:n,scope:a}=e,c=s("percent"),u=s("isIndeterminate")?"":s("formatter").format(c/100),o=i("max"),f=i("min"),h=i("orientation"),l=i("translations"),g=s("isIndeterminate"),d=r.get("value"),p=(l==null?void 0:l.value({value:d,max:o,percent:c,min:f,formatter:s("formatter")}))??"",y=xt(d,o),m={role:"progressbar","aria-label":p,"data-max":o,"aria-valuemin":f,"aria-valuemax":o,"aria-valuenow":d??void 0,"data-orientation":h,"data-state":y},b=Pt(e);return{value:d,valueAsString:p,min:f,max:o,percent:c,percentAsString:u,indeterminate:g,setValue(E){n({type:"VALUE.SET",value:E})},setToMax(){n({type:"VALUE.SET",value:o})},setToMin(){n({type:"VALUE.SET",value:f})},getRootProps(){return t.element({dir:i("dir"),...k.root.attrs,id:Ft(a),"data-max":o,"data-value":d??void 0,"data-state":y,"data-orientation":h,style:{"--percent":g?void 0:c}})},getLabelProps(){return t.element({dir:i("dir"),id:Tt(a),...k.label.attrs,"data-orientation":h})},getValueTextProps(){return t.element({dir:i("dir"),"aria-live":"polite",...k.valueText.attrs})},getTrackProps(){return t.element({dir:i("dir"),id:kt(a),...k.track.attrs,...m})},getRangeProps(){return t.element({dir:i("dir"),...k.range.attrs,"data-orientation":h,"data-state":y,style:{[s("isHorizontal")?"width":"height"]:g?void 0:`${c}%`}})},getCircleProps(){return t.element({dir:i("dir"),id:It(a),...k.circle.attrs,...m,...b.root})},getCircleTrackProps(){return t.element({dir:i("dir"),"data-orientation":h,...k.circleTrack.attrs,...b.track})},getCircleRangeProps(){return t.element({dir:i("dir"),...k.circleRange.attrs,...b.range,"data-state":y})},getViewProps(E){return t.element({dir:i("dir"),...k.view.attrs,"data-state":E.state,hidden:E.state!==y})}}}function xt(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}var fe={style:{"--radius":"calc(var(--size) / 2 - var(--thickness) / 2)",cx:"calc(var(--size) / 2)",cy:"calc(var(--size) / 2)",r:"var(--radius)",fill:"transparent",strokeWidth:"var(--thickness)"}},Ct={style:{width:"var(--size)",height:"var(--size)"}};function Pt(e){const{context:t,computed:r}=e;return{root:Ct,track:fe,range:{opacity:t.get("value")===0?0:void 0,style:{...fe.style,"--percent":r("percent"),"--circumference":"calc(2 * 3.14159 * var(--radius))","--offset":"calc(var(--circumference) * (100 - var(--percent)) / 100)",strokeDashoffset:"calc(var(--circumference) * ((100 - var(--percent)) / 100))",strokeDasharray:r("isIndeterminate")?void 0:"var(--circumference)",transformOrigin:"center",transform:"rotate(-90deg)"}}}}var Mt=he({props({props:e}){const t=e.min??0,r=e.max??100;return{orientation:"horizontal",...e,max:r,min:t,defaultValue:e.defaultValue!==void 0?e.defaultValue:At(t,r),formatOptions:{style:"percent",...e.formatOptions},translations:{value:({value:s,percent:i,formatter:n})=>{if(s===null)return"loading...";if(n){const c=n.resolvedOptions().style==="percent"?i/100:s;return n.format(c)}return s.toString()},...e.translations}}},initialState(){return"idle"},entry:["validateContext"],context({bindable:e,prop:t}){return{value:e(()=>({defaultValue:t("defaultValue"),value:t("value"),onChange(r){var s;(s=t("onValueChange"))==null||s({value:r})}}))}},computed:{isIndeterminate:({context:e})=>e.get("value")===null,percent({context:e,prop:t}){const r=e.get("value");return ge(r)?$e(r,t("min"),t("max"))*100:-1},formatter:Re(({prop:e})=>[e("locale"),e("formatOptions")],(e,t)=>new Intl.NumberFormat(e,t)),isHorizontal:({prop:e})=>e("orientation")==="horizontal"},states:{idle:{on:{"VALUE.SET":{actions:["setValue"]}}}},implementations:{actions:{setValue:({context:e,event:t,prop:r})=>{const s=t.value===null?null:Math.max(0,Math.min(t.value,r("max")));e.set("value",s)},validateContext:({context:e,prop:t})=>{const r=t("max"),s=t("min"),i=e.get("value");if(i!=null){if(!z(r))throw new Error(`[progress] The max value passed \`${r}\` is not a valid number`);if(!Lt(i,r))throw new Error(`[progress] The value passed \`${i}\` exceeds the max value \`${r}\``);if(!Dt(i,s))throw new Error(`[progress] The value passed \`${i}\` exceeds the min value \`${s}\``)}}}}}),z=e=>ge(e)&&!isNaN(e),Lt=(e,t)=>z(e)&&e<=t,Dt=(e,t)=>z(e)&&e>=t,At=(e,t)=>e+(t-e)/2;pe()(["dir","getRootNode","id","ids","max","min","orientation","translations","value","onValueChange","defaultValue","formatOptions","locale"]);export{pe as a,at as b,D as c,bt as d,Nt as e,St as f,Rt as g,Vt as h,Mt as i,$t as m,Je as t};
